<!DOCTYPE html>

<head>
  <title>Shatter</title>

  <link rel="stylesheet" href="../CSS/theme-index.css" />
  <link rel="stylesheet" href="../CSS/index.css" />
  <link rel="stylesheet" href="../CSS/games.css" />
  <link rel="icon" type="image/x-icon" href="../UI/favicon.ico" />

  <!-- main js stuff, copy paste -->
  <script src="../JS/supabase.js"></script>
  <script src="../JS/accounts.js"></script>
  <script src="../JS/fetch.js"></script>
  <script src="../JS/main.js" type="module"></script>

  <loading />

  <style>
    html {
      overflow-x: hidden;
    }
  </style>
</head>

<body>
  <div class="background"></div>

  <div class="gamesDiv"></div>

  <script type="module">
    window.showLoadingScreen();
    let games = await FFFF('shattered-team/shatter-games', "game-sources", "dir");
    games.forEach((game) => {
      const gameDiv = document.createElement('div');
      gameDiv.className = 'game';
      gameDiv.game = game;
      gameDiv.onclick = function () {
        window.location.href = '-play.html?id=' + game;
      };
      const favButton = document.createElement('button');
      const icon = document.createElement('img');
      const text = document.createElement('h2');
      text.textContent = game;
      icon.src = 'https://fffwukshwgrcdyqmvahg.supabase.co/storage/v1/object/public/gameIcons/' + game + '.png';
      favButton.textContent = 'fav';
      gameDiv.appendChild(favButton);
      gameDiv.appendChild(icon);
      gameDiv.appendChild(text);
      document.getElementsByClassName('gamesDiv')[0].appendChild(gameDiv);
    });
    

    games = await FFFF('shattered-team/shatter-games', "game-sources/-flash/", "file");
    games.forEach((game) => {
      const gameDiv = document.createElement('div');
      gameDiv.className = 'game';
      gameDiv.game = game;
      gameDiv.onclick = function () {
        window.location.href = '-play.html?id=' + game + '&flash=true';
      };
      const favButton = document.createElement('button');
      const icon = document.createElement('img');
      const text = document.createElement('h2');
      text.textContent = game.replace('.swf','');
      icon.src = 'https://fffwukshwgrcdyqmvahg.supabase.co/storage/v1/object/public/gameIcons/' + game + '.png';
      favButton.textContent = 'fav';
      gameDiv.appendChild(favButton);
      gameDiv.appendChild(icon);
      gameDiv.appendChild(text);
      document.getElementsByClassName('gamesDiv')[0].appendChild(gameDiv);
    });

    window.hideLoadingScreen();
  </script>
</body>